function setPopupHeight(n){var t=$("#MemberProfilePopupDiv"),r=t.height(),i=n.contentWindow.document.body.scrollHeight;n.height=i;t.css({top:t.offset().top+(r-i)})}(function(n){var i=!0,r="/members/Flair/",t="/script/Membership/View.aspx";n.fn.MemberProfilePopup=function(t){function o(n){var r=",",t=Math.max(0,n).toFixed(0),u=t.length,i=/^\d{4,}$/.test(t)?u%3:0;return(i?t.slice(0,i)+r:"")+t.slice(i).replace(/(\d{3})(?=\d)/g,"$1"+r)}function s(n,t){var r,u,i;return(n.charAt(n.length-1)!="="&&(n=n+"="),r=t.toLowerCase().indexOf(n),r<0||r+n.length==t.length)?"":(u=t.indexOf("&",r),u<0&&(u=t.length),i=t.substring(r+n.length,u),i=i.replace(/%20/gi," "),i=i.replace(/\+/gi," "),i=i.replace(/%22/gi,""),i.replace(/\"/gi,""))}var f={memberSummariesUrl:"/script/Membership/WebServices/MemberServices.aspx/GetMemberSummary",missingMemberImageUrl:"/script/Membership/Images/member_unknown.gif"},u,e;return t&&n.extend(f,t),n("<div id=\"MemberProfilePopupDiv\" class='raised box'><\/div>").css({display:"none",position:"absolute"}).appendTo("body"),u=n("#MemberProfilePopupDiv"),e={sensitivity:7,interval:250,timeout:250,over:function(){var e,t,h,c,l;$target=n(this);e=$target.attr("href");t=s("mid",e);i?(u.empty(),n("<iFrame src='"+r+t+"?Display=Embedded' frameborder='0' width='300' scrolling='no' height='150' onload='setPopupHeight(this)'><\/iFrame>").appendTo("#MemberProfilePopupDiv"),h=u.height(),u.css({left:Math.min($target.offset().left+20,window.innerWidth-u.width()-25),top:$target.offset().top-(h+16)}).show()):(c=f.memberSummariesUrl,l="{ 'memberId' : "+t+" }",n.ajax({url:c,data:l,type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",success:function(t){var i=t,r;i.ImageUrl&&i.ImageUrl.length!=0||(i.ImageUrl=f.missingMemberImageUrl);u.empty();n("<table class='member-popup'><tr valign='top'><td><img /><\/td><td><div class='name'>"+i.Name+"<\/div><div class='title'>"+i.Title+(i.Title&&i.Company?" at ":"")+i.Company+"<\/div><div class='location'>"+i.Country+"<\/div><div class='rep'>"+o(i.RepPoints)+" points<\/div><\/td><\/tr><\/table>").appendTo("#MemberProfilePopupDiv");n("#MemberProfilePopupDiv img").error(function(){$this=n(this);$this.unbind("error");$this.attr("src",f.missingMemberImageUrl);var t=u.height();u.css({left:$target.offset().left+20,top:$target.offset().top-(t+16)})}).attr("src",i.ImageUrl);r=u.height();u.css({left:$target.offset().left+20,top:$target.offset().top-(r+16)}).show()}}))},out:function(){u.hide()}},this.hoverIntent?this.hoverIntent(e):this.hover(e.over,e.out),this};n(function(){n(".qa-info a[href*='"+t+"']").MemberProfilePopup();n(".qa-list a[href*='"+t+"']").MemberProfilePopup();n(".author a[href*='"+t+"']").MemberProfilePopup()})})(jQuery);